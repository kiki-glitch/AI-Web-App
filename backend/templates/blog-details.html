<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <meta name="theme-color" content="#6c5ce7"/>
  <title>{{ article.youtube_title|default:"Blog Post Details" }}</title>

  <!-- Tailwind (same as index) -->
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet"/>

  <style>
    @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap');
    * { font-family: 'Inter', sans-serif; }
    body {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      min-height: 100vh; position: relative;
    }
    body::before {
      content: ''; position: fixed; inset: 0;
      background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><defs><pattern id="grain" width="100" height="100" patternUnits="userSpaceOnUse"><circle cx="25" cy="25" r="1" fill="%23ffffff" opacity="0.05"/><circle cx="75" cy="75" r="1.5" fill="%23ffffff" opacity="0.03"/><circle cx="50" cy="10" r="0.5" fill="%23ffffff" opacity="0.08"/><circle cx="20" cy="80" r="1" fill="%23ffffff" opacity="0.04"/><circle cx="80" cy="30" r="1.2" fill="%23ffffff" opacity="0.06"/></pattern></defs><rect width="100" height="100" fill="url(%23grain)"/></svg>') repeat;
      pointer-events: none; z-index: -1;
    }
    .glass      { background: rgba(255,255,255,0.1); backdrop-filter: blur(20px); border: 1px solid rgba(255,255,255,0.2); box-shadow: 0 25px 45px rgba(0,0,0,0.1); }
    .glass-nav  { background: rgba(255,255,255,0.05); backdrop-filter: blur(30px); border-bottom: 1px solid rgba(255,255,255,0.1); }
    .btn-primary{ background: linear-gradient(135deg, #ff6b6b, #ee5a6f); transition: all .3s cubic-bezier(.4,0,.2,1); }
    .btn-primary:hover { background: linear-gradient(135deg, #ff5252, #e91e63); transform: translateY(-2px); box-shadow: 0 20px 40px rgba(255,107,107,.4); }
    .btn-subtle { background: rgba(255,255,255,0.2); color: white; }
    .btn-subtle:hover { background: rgba(255,255,255,0.3); }
    .blog-content { background: rgba(255,255,255,.95); backdrop-filter: blur(15px); border-radius:20px; border:1px solid rgba(255,255,255,.3); }
    .blog-content h1,.blog-content h2,.blog-content h3 {
      background: linear-gradient(135deg,#667eea,#764ba2);
      -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text;
    }
    .fade-in{animation:fadeIn .6s ease-out}
    @keyframes fadeIn{from{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}
  </style>
</head>
<body class="min-h-screen">

  <!-- Navbar -->
  <nav class="glass-nav sticky top-0 z-50 p-6">
    <div class="container mx-auto flex justify-between items-center">
      <div class="flex items-center space-x-3">
        <div class="w-10 h-10 bg-gradient-to-br from-pink-500 to-purple-600 rounded-xl flex items-center justify-center">
          <i class="fas fa-robot text-white text-lg"></i>
        </div>
        <a href="/"><h1 class="text-2xl font-bold text-white">AI Blog Generator</h1></a>
      </div>
      <div class="flex items-center space-x-6">
        <span class="text-white px-3 py-2 rounded-lg">
          <i class="fas fa-user mr-2"></i>Welcome {{ user.username }}
        </span>
        <a href="/blog-list" class="text-white hover:text-pink-300 transition-colors px-3 py-2 rounded-lg">
          <i class="fas fa-bookmark mr-2"></i>Saved Posts
        </a>
        <a href="/logout" class="text-white hover:text-pink-300 transition-colors px-3 py-2 rounded-lg">
          <i class="fas fa-sign-out-alt mr-2"></i>Logout
        </a>
      </div>
    </div>
  </nav>

  <!-- Content -->
  <div class="container mx-auto px-6 py-12">
    <div class="max-w-5xl mx-auto space-y-6">

      <!-- Header card -->
      <div class="glass rounded-3xl p-6 md:p-8">
        <div class="flex flex-col md:flex-row md:items-start md:justify-between gap-4">
          <div>
            <h2 class="text-3xl font-bold text-white">{{ article.youtube_title|default:"Blog Post" }}</h2>
            <div class="mt-2 flex flex-wrap items-center gap-3 text-white/80 text-sm">
              <span class="inline-flex items-center gap-2">
                <i class="far fa-calendar-alt"></i>
                {% if article.created_at %}{{ article.created_at|date:"M d, Y" }}{% else %}â€”{% endif %}
              </span>
              <span class="inline-flex items-center gap-2">
                <i class="fab fa-youtube"></i>
                <a class="underline hover:text-pink-200" href="{{ article.youtube_link }}" target="_blank" rel="noopener noreferrer">
                  View on YouTube
                </a>
              </span>
            </div>
          </div>

          <!-- Action bar -->
          <div class="flex flex-wrap gap-3">
            <a href="/blog-list" class="btn-subtle px-4 py-3 rounded-xl font-semibold transition-all duration-300 inline-flex items-center gap-2">
              <i class="fas fa-chevron-left"></i>
              Back to List
            </a>
            <button id="copyBtn" class="btn-subtle px-4 py-3 rounded-xl font-semibold transition-all duration-300 inline-flex items-center gap-2">
              <i class="fas fa-copy"></i> Copy
            </button>
            <button id="shareBtn" class="btn-subtle px-4 py-3 rounded-xl font-semibold transition-all duration-300 inline-flex items-center gap-2">
              <i class="fas fa-share-alt"></i> Share
            </button>
            <button id="pdfBtn" class="btn-primary text-white px-4 py-3 rounded-xl font-semibold transition-all duration-300 inline-flex items-center gap-2">
              <i class="fas fa-download"></i> PDF
            </button>
          </div>
        </div>
      </div>

      <!-- Article -->
      <article class="blog-content rounded-2xl p-8 fade-in" id="articleContent">
        {{ article_html|safe }}
      </article>

      <!-- Info card -->
      <div class="glass rounded-3xl p-6 md:p-8">
        <h4 class="text-xl font-semibold text-white mb-3">Source</h4>
        <div class="text-white/90">
          <div class="flex items-center gap-2">
            <i class="fab fa-youtube"></i>
            <span class="font-semibold">{{ article.youtube_title|default:"YouTube Video" }}</span>
          </div>
          <a class="block mt-1 underline hover:text-pink-200" href="{{ article.youtube_link }}" target="_blank" rel="noopener noreferrer">
            {{ article.youtube_link }}
          </a>
        </div>
      </div>

    </div>
  </div>

  <!-- Footer -->
  <footer class="text-center py-8 text-white/80">
    <p class="text-lg">
      Crafted with <i class="fas fa-heart text-red-400 mx-1"></i> by
      <a href="https://alexwamaidev.netlify.app" class="text-pink-300 hover:text-pink-200 transition-colors font-semibold">AlexDev</a>
    </p>
  </footer>

  <script>
    // Copy plain text (good for editors)
    const copyBtn = document.getElementById('copyBtn');
    const shareBtn = document.getElementById('shareBtn');
    const pdfBtn = document.getElementById('pdfBtn');

    copyBtn.addEventListener('click', async () => {
      const content = document.getElementById('articleContent').innerText;
      try {
        await navigator.clipboard.writeText(content);
        const original = copyBtn.innerHTML;
        copyBtn.innerHTML = '<i class="fas fa-check"></i> Copied';
        setTimeout(() => copyBtn.innerHTML = original, 1500);
      } catch (e) { console.error('Copy failed', e); }
    });

    shareBtn.addEventListener('click', async () => {
      const shareData = {
        title: document.title,
        text: 'Check out this blog I generated.',
        url: window.location.href
      };
      try {
        if (navigator.share) {
          await navigator.share(shareData);
        } else {
          await navigator.clipboard.writeText(shareData.url);
          const original = shareBtn.innerHTML;
          shareBtn.innerHTML = '<i class="fas fa-check"></i> Link Copied';
          setTimeout(() => shareBtn.innerHTML = '<i class="fas fa-share-alt"></i> Share', 1500);
        }
      } catch (e) { console.log('Share dismissed or failed', e); }
    });

    pdfBtn.addEventListener('click', () => {
      window.print(); // baseline; swap to html2pdf.js if you prefer true PDFs
    });
  </script>
</body>
</html>
